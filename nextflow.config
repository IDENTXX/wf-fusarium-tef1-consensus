manifest {
  name            = 'IDENTXX/wf-fusarium-tef1-consensus'
  author          = 'IDENTXX'
  homePage        = 'https://github.com/IDENTXX/wf-fusarium-tef1-consensus'
  description     = 'Metabarcoding workflow for Fusarium TEF1 (EF-1α) Consensus'
  mainScript      = 'main.nf'
  nextflowVersion = '>=20.10.0'
  version         = 'v1.0.3'
}

params {
  // Inputs
  reads    = null
  db_fasta = null
  out_dir  = 'output'

  // Primers
  primer_fwd = ''
  primer_rev = ''
  require_primers  = true
  trim_error_rate  = 0.12

  // Filtering
  min_q    = 9
  min_len  = 300
  max_len  = 1200

  // Clustering
  cluster_id        = 0.90
  min_cluster_reads = 20

  // BLAST
  blast_topn = 5
}

process {
  // WICHTIG: Hier nutzen wir deinen neuen Toolbox-Container für alles
  container = 'identxx/fusarium-toolbox:v1.0'
  
  cpus   = 4
  memory = '4 GB'
  errorStrategy = 'finish'
  
  // Ausnahme für BLAST (zur Sicherheit den offiziellen nutzen)
  withName: 'MAKEBLASTDB|BLASTN' {
      container = 'ncbi/blast:2.16.0'
  }
}

profiles {
  standard {
    docker.enabled = true
    docker.runOptions = '-u 0:0'
  }
}



